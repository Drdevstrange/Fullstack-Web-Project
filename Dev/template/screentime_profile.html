{% extends 'base.html' %}
{% load static %}
{% block title %}Profile| {% endblock %}

{% block content %}

</style>
<section class="hero container">
  <img class="hero__img" src="/{{ profile.image }}" onerror="this.src=`{% static 'images/dpplaceholder.png' %}` ;"  alt="Profile picture" />
  <!-- <h2 class="hero__subtitle">Hi, I'm Dev ðŸ‘‹</h2> -->
  <h1 class="hero__title">
    {% if profile.full_name%}
      {{ profile.full_name }}
    {% else %}
      {{ profile.user.username|title }}
    {% endif %}
  </h1>
  <h2 class="hero__subtitle">@{{ profile.user.username }}</h2>
  <!-- <a class="hero__btn btn" href="{%url 'signup'%}">Join Now</a> -->
  <div class="follow__count">
    <a style="text-decoration: none; color: var(--clr-light);" href="{% url 'profilee' profile.user %}">
      <div class="posts__count">
        <h3 class="">Posts</h3>
        {{profile.user.post_set.all.count}}
      </div>
    </a>
    <div class="tweets__count">
      <h3 class="">Thoughts</h3>
      {{profile.user.tweet_set.all.count}}
    </div>
    <div class="followers__count">
      <h3 class="">Followers</h3>
      {{profile.followers.all.count}}
      <!-- {% for i in profile.following.all %}
        <p>{{i}}</p>
        {% endfor %}   -->
    </div>
    <div class="following__count">
      <h3 class="">Following</h3>
      {{profile.following.all.count}}
    </div>
    <a style="text-decoration: none; color: var(--clr-light);" href="{% url 'savedd' profile.user %}">
      <div class="saved__count">
        <h3 class="">Saved</h3>
        {{ profile.saved.count }}
      </div>
    </a>
  </div>
  {% if profile.user == request.user %}
    <a class="btn"  href="{% url 'editprofile' %}">Edit Profile</a>
  {% endif %}
  {% if profile.user != request.user %}
  <div class="follow__button">
    {% if request.user.profile in profile.followers.all %}
      <div>
        <a class="btn"  href="{% url 'follownow' profile.user.id 0 %}">Unfollow</a>
      </div>
    {% else %}  
      <div>
      <a class="btn"  href="{% url 'follownow' profile.user.id 1 %}">Follow</a>
      </div>
    {% endif %}
    <div>
      <a class="btn"  href="{% url 'link' profile.user.id %}">Message</a>
    </div>
  </div>
{% endif %}
    <p class="featured__description profile__bio">
      <!-- <strong><b>Bio</b></strong><br> -->
      {{ profile.bio }}
    </p>
    <!-- <div class="profile-links">
      <a href="{% url 'profilee' profile.user %}" class="{% if url_name == 'profilee' %}active-link{% endif %}">Posts</a>
      <a href="{% url 'savedd' profile.user %}" class="{% if url_name == 'savedd' %}active-link{% endif %}">Saved</a>
    </div> -->
    <div class="featured__img-container">
        <div class="graph-container">
            <div class="bar-chart">
              <!-- Loop through screen time data to generate bars -->
              {% for day, time_spent in bar_data.items %}
              <div class="bar">
                {{ day }}
                <div class="bar-fill" style='height: calc( {{ time_spent }} / 12 * 400px);'></div>
              </div>
              {% endfor %}
            </div>
        </div>
    </div>
    <br>
    <br>
    </section>
    <script>
      // let heroimg = document.getElementById("heroimg")
      // heroimg.onerror = function(){
      //   heroimg.src="{% static 'images/dpplaceholder.png'%}";
      // }
</script>
{% endblock %}